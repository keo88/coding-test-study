import sys

T = int(input())

dirt = {
    'U+': [
        ('F', [(0, 0), (0, 1), (0, 2)]),
        ('L', [(0, 0), (0, 1), (0, 2)]),
        ('B', [(0, 0), (0, 1), (0, 2)]),
        ('R', [(0, 0), (0, 1), (0, 2)]),
    ],
    'U-': [
        ('F', [(0, 0), (0, 1), (0, 2)]),
        ('R', [(0, 0), (0, 1), (0, 2)]),
        ('B', [(0, 0), (0, 1), (0, 2)]),
        ('L', [(0, 0), (0, 1), (0, 2)]),
    ],
    'D+': [
        ('F', [(2, 0), (2, 1), (2, 2)]),
        ('R', [(2, 0), (2, 1), (2, 2)]),
        ('B', [(2, 0), (2, 1), (2, 2)]),
        ('L', [(2, 0), (2, 1), (2, 2)]),
    ],
    'D-': [
        ('F', [(2, 0), (2, 1), (2, 2)]),
        ('L', [(2, 0), (2, 1), (2, 2)]),
        ('B', [(2, 0), (2, 1), (2, 2)]),
        ('R', [(2, 0), (2, 1), (2, 2)]),
    ],
    'F+': [
        ('U', [(2, 0), (2, 1), (2, 2)]),
        ('R', [(0, 0), (1, 0), (2, 0)]),
        ('D', [(0, 2), (0, 1), (0, 0)]),
        ('L', [(2, 2), (1, 2), (0, 2)]),
    ],
    'F-': [
        ('U', [(2, 0), (2, 1), (2, 2)]),
        ('L', [(2, 2), (1, 2), (0, 2)]),
        ('D', [(0, 2), (0, 1), (0, 0)]),
        ('R', [(0, 0), (1, 0), (2, 0)]),
    ],
    'B+': [
        ('U', [(0, 2), (0, 1), (0, 0)]),
        ('L', [(0, 0), (1, 0), (2, 0)]),
        ('D', [(2, 0), (2, 1), (2, 2)]),
        ('R', [(2, 2), (1, 2), (0, 2)]),
    ],
    'B-': [
        ('U', [(0, 2), (0, 1), (0, 0)]),
        ('R', [(2, 2), (1, 2), (0, 2)]),
        ('D', [(2, 0), (2, 1), (2, 2)]),
        ('L', [(0, 0), (1, 0), (2, 0)]),
    ],
    'L+': [
        ('U', [(0, 0), (1, 0), (2, 0)]),
        ('F', [(0, 0), (1, 0), (2, 0)]),
        ('D', [(0, 0), (1, 0), (2, 0)]),
        ('B', [(2, 2), (1, 2), (0, 2)]),
    ],
    'L-': [
        ('U', [(0, 0), (1, 0), (2, 0)]),
        ('B', [(2, 2), (1, 2), (0, 2)]),
        ('D', [(0, 0), (1, 0), (2, 0)]),
        ('F', [(0, 0), (1, 0), (2, 0)]),
    ],
    'R+': [
        ('U', [(2, 2), (1, 2), (0, 2)]),
        ('B', [(0, 0), (1, 0), (2, 0)]),
        ('D', [(2, 2), (1, 2), (0, 2)]),
        ('F', [(2, 2), (1, 2), (0, 2)]),
    ],
    'R-': [
        ('U', [(2, 2), (1, 2), (0, 2)]),
        ('F', [(2, 2), (1, 2), (0, 2)]),
        ('D', [(2, 2), (1, 2), (0, 2)]),
        ('B', [(0, 0), (1, 0), (2, 0)]),
    ],
}

selfDirs = {
    '+': [(0,0), (0,1), (0,2), (1,2), (2,2), (2,1), (2,0), (1,0)],
    '-': [(0,0), (1,0), (2,0), (2,1), (2,2), (1,2), (0,2), (0,1)],
}

for t in range(T):
    N = int(sys.stdin.readline())
    spins = list(sys.stdin.readline().split())
    cube = {
        'U': [
            ['w', 'w', 'w'],
            ['w', 'w', 'w'],
            ['w', 'w', 'w'],
        ],
        'D': [
            ['y', 'y', 'y'],
            ['y', 'y', 'y'],
            ['y', 'y', 'y'],
        ],
        'F': [
            ['r', 'r', 'r'],
            ['r', 'r', 'r'],
            ['r', 'r', 'r'],
        ],
        'B': [
            ['o', 'o', 'o'],
            ['o', 'o', 'o'],
            ['o', 'o', 'o'],
        ],
        'L': [
            ['g', 'g', 'g'],
            ['g', 'g', 'g'],
            ['g', 'g', 'g'],
        ],
        'R': [
            ['b', 'b', 'b'],
            ['b', 'b', 'b'],
            ['b', 'b', 'b'],
        ],
    }

    for spin in spins:
        sdir = dirt[spin]
        l_face, l_pos = sdir[3]
        savedValue = []
        for i in range(3):
            savedValue.append(cube[l_face][l_pos[i][0]][l_pos[i][1]])

        for i in range(2, -1, -1):
            face, pos = sdir[i]
            n_face, n_pos = sdir[i + 1]

            for j in range(3):
                cube[n_face][n_pos[j][0]][n_pos[j][1]] = cube[face][pos[j][0]][pos[j][1]]
        n_face, n_pos = sdir[0]
        for j in range(3):
            cube[n_face][n_pos[j][0]][n_pos[j][1]] = savedValue[j]

        selfDir = selfDirs[spin[1]]
        tArr = cube[spin[0]]
        ltArr1 = tArr[selfDir[6][0]][selfDir[6][1]]
        ltArr2 = tArr[selfDir[7][0]][selfDir[7][1]]
        for i in range(5, -1, -1):
            tArr[selfDir[i + 2][0]][selfDir[i + 2][1]] = tArr[selfDir[i][0]][selfDir[i][1]]
        tArr[selfDir[0][0]][selfDir[0][1]] = ltArr1
        tArr[selfDir[1][0]][selfDir[1][1]] = ltArr2

        # print(spin)
        # for i in range(3):
        #     print(''.join(cube['U'][i]))
        # print()
        # for i in range(3):
        #     print(''.join(cube['L'][i]), ''.join(cube['F'][i]), ''.join(cube['R'][i]), ''.join(cube['B'][i]))
        # print()
        # for i in range(3):
        #     print(''.join(cube['D'][i]))
        #
        # print()
        # print()

    for i in range(3):
        print(''.join(cube['U'][i]))